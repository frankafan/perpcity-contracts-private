
[profile.default]
  solc_version = "0.8.30"
  evm_version = "cancun"
  via_ir = true
  optimizer = true
  optimizer_runs = 10_000
  block_gas_limit = 10_000_000_000

remappings = [
  "@forge-std/=lib/forge-std/",
  "@solady/=lib/solady/",
  "@uniswap/v4-core/=lib/v4-core/",
  "@halmos-cheatcodes/=lib/halmos-cheatcodes/"
]

[fmt]
  sort_imports = true
  single_line_statement_blocks = "single"

ignored_error_codes = [
  2394, # Transient storage warning
]

[rpc_endpoints]
  base = "https://mainnet.base.org"
  base_sepolia = "https://sepolia.base.org"
  localhost = "http://localhost:8545"

[profile.default.fuzz]
  runs = 256
  show_logs = true

[profile.default.invariant]
  depth = 32
  runs = 16
  fail_on_revert = true

[profile.ci]
  verbosity = 4

[profile.ci.fuzz]
  runs = 1024
  show_logs = true

[profile.ci.invariant]
  depth = 128
  runs = 32
  fail_on_revert = true

# Anvil resource optimization settings
[profile.anvil]
  block_time = 1            # 1 second block time instead of instant
  gas_limit = 30_000_000    # Reasonable gas limit
  gas_price = 20_000_000_000 # 20 gwei
  accounts = 10             # Reduce from default 10 accounts
  balance = 10_000          # 10k ETH per account instead of 100k
  state_interval = 0        # Disable periodic state dumps
  no_storage_caching = true # Disable storage caching

# Halmos configuration for symbolic execution
[profile.halmos]
  src = "src"
  test = "halmos"
  via_ir = true  # Keep viaIR enabled for complex contracts
  optimizer_runs = 1000  # Reduce optimizer runs to help with compilation
  solver_timeout_ms = 0
  solver_max_memory = 0
  loop_bound = 2
  unroll_bound = 3